PREFIX dcat: <http://www.w3.org/ns/dcat#>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX endpoint: <https://prez.dev/endpoint/ogcrecords/>
PREFIX prez: <https://prez.dev/>
PREFIX ont: <https://prez.dev/ont/>
PREFIX sh: <http://www.w3.org/ns/shacl#>
prefix skos: <http://www.w3.org/2004/02/skos/core#>

endpoint:catalog-listing a ont:ListingEndpoint ;
    ont:endpointTemplate "/catalogs" ;
    ont:deliversClasses prez:CatalogList ;  # required to determine the correct profile for ConnegP
    sh:targetClass dcat:Catalog ;  # required for query construction
.

endpoint:catalog-object a ont:ObjectEndpoint ;
    sh:targetNode "$object" ;
    ont:deliversClasses dcat:Catalog ;  # required for link generation for objects
    ont:endpointTemplate "/catalogs/$object" ;
    ont:parentEndpoint endpoint:catalog-listing ;
.

endpoint:vocab-listing a ont:ListingEndpoint ;
    ont:endpointTemplate "/catalogs/$parent_1/collections" ;
    ont:deliversClasses prez:SchemesList ;  # required to determine the correct profile for ConnegP
    ont:ParentToFocusRelation dcterms:hasPart ;
    sh:targetClass skos:ConceptScheme ;  # required for query construction
    ont:parentEndpoint endpoint:catalog-object ;
.

endpoint:vocab-object a ont:ObjectEndpoint ;
    sh:targetNode "$object" ;
    ont:deliversClasses skos:ConceptScheme ;  # required for link generation for objects
    ont:endpointTemplate "/catalogs/$parent_1/collections/$object" ;
    ont:ParentToFocusRelation dcterms:hasPart ;
    ont:parentEndpoint endpoint:vocab-listing ;
.

endpoint:concept-listing a ont:ListingEndpoint ;
    ont:endpointTemplate "/catalogs/$parent_2/collections/$parent_1/items" ;
    ont:deliversClasses prez:ConceptList ;  # required to determine the correct profile for ConnegP
    ont:ParentToFocusRelation skos:hasTopConcept ;
    sh:targetClass skos:Concept ;  # required for query construction
    ont:parentEndpoint endpoint:vocab-object ;
.

endpoint:concept-object a ont:ObjectEndpoint ;
    sh:targetNode "$object" ;
    ont:deliversClasses skos:Concept ;  # required for link generation for objects
    ont:endpointTemplate "/catalogs/$parent_2/collections/$parent_1/items/$object" ;
    ont:ParentToFocusRelation skos:hasTopConcept ;
    ont:parentEndpoint endpoint:concept-listing ;
.

endpoint:catalog-listing ont:defaultLimit 20 ; ont:defaultOffset 0 .

endpoint:vocab-listing ont:defaultLimit 20 ; ont:defaultOffset 0 .

endpoint:concept-listing ont:defaultLimit 20 ; ont:defaultOffset 0 .