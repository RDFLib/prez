@prefix ont: <https://prez.dev/ont/> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix ex: <http://example.org/ns#> .
@prefix geo: <http://www.opengis.net/ont/geosparql#> .
@prefix prez: <https://prez.dev/> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .

ex:TopLevelCatalogs
    a sh:NodeShape ;
    ont:hierarchyLevel 1 ;
    sh:targetClass dcat:Catalog ;
    sh:property [
        sh:path dcterms:hasPart ;
        sh:or (
            [ sh:class dcat:Catalog ]
            [ sh:class geo:FeatureCollection ]
            [ sh:class skos:ConceptScheme ]
            [ sh:class skos:Collection ]
        ) ;
    ] .

ex:Collections
    a sh:NodeShape ;
    ont:hierarchyLevel 2 ;
    sh:targetClass geo:FeatureCollection , skos:ConceptScheme , skos:Collection , dcat:Catalog ;
    sh:property [
        sh:path [ sh:inversePath dcterms:hasPart ] ;
        sh:class dcat:Catalog ;
    ] .

#ex:ConceptScheme
#    a sh:NodeShape ;
#    ont:hierarchyLevel 2 ;
#    sh:targetClass skos:ConceptScheme ;
#    sh:property [
#        sh:path [ sh:inversePath dcterms:hasPart ] ;
#        sh:class dcat:Catalog ;
#    ] .
#
#ex:Collection
#    a sh:NodeShape ;
#    ont:hierarchyLevel 2 ;
#    sh:targetClass skos:Collection ;
#    sh:property [
#        sh:path [ sh:inversePath dcterms:hasPart ] ;
#        sh:class dcat:Catalog ;
#    ] .
#
#ex:LowerLevelCatalog
#    a sh:NodeShape ;
#    ont:hierarchyLevel 2 ;
#    sh:targetClass dcat:Catalog ;
#    sh:property [
#        sh:path [ sh:inversePath dcterms:hasPart ] ;
#        sh:class dcat:Catalog ;
#    ] .

ex:Feature
    a sh:NodeShape ;
    ont:hierarchyLevel 3 ;
    sh:targetClass geo:Feature ;
    sh:property [
        sh:path [ sh:inversePath rdfs:member ] ;
        sh:class geo:FeatureCollection ;
    ] , [
        sh:path ( [sh:inversePath rdfs:member ] [ sh:inversePath dcterms:hasPart ] );
        sh:class dcat:Catalog ;
    ] .

ex:ConceptSchemeConcept
    a sh:NodeShape ;
    ont:hierarchyLevel 3 ;
    sh:targetClass skos:Concept ;
    sh:property [
        sh:path skos:inScheme ;
        sh:class skos:ConceptScheme ;
    ] , [
        sh:path ( skos:inScheme [ sh:inversePath dcterms:hasPart ] );
        sh:class dcat:Catalog ;
    ] .

ex:CollectionConcept
    a sh:NodeShape ;
    ont:hierarchyLevel 3 ;
    sh:targetClass skos:Concept ;
    sh:property [
        sh:path [ sh:inversePath skos:member ] ;
        sh:class skos:Collection ;
    ] , [
        sh:path ( [ sh:inversePath skos:member ] [ sh:inversePath dcterms:hasPart ] );
        sh:class dcat:Catalog ;
    ] .

ex:Resource
    a sh:NodeShape ;
    ont:hierarchyLevel 3 ;
    sh:targetClass dcat:Resource ;
    sh:property [
        sh:path [ sh:inversePath dcterms:hasPart ] ;
        sh:class dcat:Catalog ;
    ] , [
        sh:path ( [ sh:inversePath dcterms:hasPart ] [ sh:inversePath dcterms:hasPart ] );
        sh:class dcat:Catalog ;
    ] .